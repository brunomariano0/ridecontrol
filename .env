SUPABASE_URL=https://maexsnqfhywddzfxqraw.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hZXhzbnFmaHl3ZGR6ZnhxcmF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIzOTUyNjksImV4cCI6MjA1Nzk3MTI2OX0.C0BHN_d2m_P2Yy9w5IMUAuVXVM8C0md-eLXBmNDMCBA


create table public.daily_entries (
  id uuid default gen_random_uuid() primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,
  user_id text not null,
  date date not null,
  ganhos numeric not null,
  despesas numeric not null,
  distancia numeric not null,
  ganhos_por_km numeric not null,
  horas_trabalhadas numeric not null,
  corridas jsonb not null default '{"uber": 0, "noventa_nove": 0, "in_driver": 0}'::jsonb
);

-- Habilitar RLS (Row Level Security)
alter table public.daily_entries enable row level security;

-- Criar política para permitir que usuários vejam apenas suas próprias entradas
create policy "Users can view their own entries"
  on public.daily_entries for select
  using (auth.uid()::text = user_id);

-- Criar política para permitir que usuários insiram suas próprias entradas
create policy "Users can insert their own entries"
  on public.daily_entries for insert
  with check (auth.uid()::text = user_id);

-- Criar política para permitir que usuários atualizem suas próprias entradas
create policy "Users can update their own entries"
  on public.daily_entries for update
  using (auth.uid()::text = user_id);

-- Criar política para permitir que usuários deletem suas próprias entradas
create policy "Users can delete their own entries"
  on public.daily_entries for delete
  using (auth.uid()::text = user_id);  